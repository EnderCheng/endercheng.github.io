<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="chrome=1">
        <title>Bloom Filter</title>
    
        <link rel="stylesheet" href="/static/minimal/stylesheets/styles.css">
        <link rel="stylesheet" href="/static/minimal/stylesheets/pygment_trac.css">
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
                  tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
        });
        </script>
        <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-62013433-1', 'auto');
        ga('send', 'pageview');

        </script>

        <!--[if lt IE 9]>
        <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
    </head>
    <body>
        <div class="wrapper">
            <header>
                <h1><a href="/">Cheng's Blog</a></h1>
                <h4>Security&Privacy.<h4>
                
<h3><a href="/archive.html">Archives</a></h4>

<h3><a href="/publications.html">Publications</a></h4>

<h3><a href="/about.html">About Me</a></h4>

<h3><a href="https://github.com/endercheng">Github</a></h4>

<div id="search-demo-container">
	<input type="text" id="search-input" placeholder="search...">
	<ul id="results-container"></ul>
</div>


 
            </header>



<section>
    <h1>Bloom Filter</h1>
    
        <h4>25 April 2015 | <a href="/2015/04/BloomFilter/#disqus_thread">Comments</a> </h4>
    
    <p>This blog tries to summarize the Bloom Filter, and answer the below three questions. <strong><em>What is Bloom Filter?</em></strong> <strong><em>How to build a Bloom Filter?</em></strong> <strong><em>How to realize Bloom Filter algorithm in Java?</em></strong></p>

<h3 id="what-is-bloom-filter">1. What is Bloom Filter?</h3>
<p>The Bloom filter is a <strong>probabilistic set data structure</strong>, proposed by Burton Howard Bloom in 1970[1]. In general, The Bloom Filter algroithm is used for testing whether an element is a member of one set with a fewer storage space than general algorithms. For example, considering a scenerio of detecting email spam, the user wants to detect and filter the spam automatically. The general algorithm is simple. First, we can store plenty of spam addresses. Then, when receving an email, the algorithm will compare the coming email address and spam addresses separatly. If matching any of the spam addresses, the email will be recognized as a spam and be filtered, otherwise, it can be saved. We can figure out that a large number of storage space is necessary for plenty of spam addresses, if we want to guarantee a good detection rate. Actually, the spam detection problem can be simplified as testing whether an element is in a set. In this scenerio, spam addresses can be seen as one set, and a receving email address is a member. So, we can use Bloom Filter to solve this kind of problem according to its defination. Comparing with general algorithms, while using Bloom Filter, we can effectivly reduce the storage space, just with a low false positive detection rate. In next section <strong><em>How to build a Bloom Filter?</em></strong>, I will discuss about the Bloom Filter algorithm.Besides spam detection, the Bloom Filter can be used for other purposes, such as detecting repeated URL when spidering websites[2], data aggregation[3],</p>

<h3 id="how-to-build-a-bloom-filter">2. How to build a Bloom Filter?</h3>

<p>There are basic two kinds of Bloom Filter, the regular one and counting one. These two algorithms will be introduced separatly.</p>

<h4 id="regular-bloom-filter">2.1 Regular Bloom Filter</h4>

<p>The storage of regular Bloom Filter can be seen as a vector. As shown in Fig 1, every element in this vector can store 1 bits, which means the value are only be 0 or 1.</p>

<p>[Fig1]</p>

<p><em>(1) Setup</em><br />
The set’s length is <script type="math/tex">n</script>, and the vector’s length is $m$, and different <script type="math/tex">k</script> <a href="">hash functions</a> has been chosen to hash every elements to set separatly. The hash function can map input to one of position in the vector and this position will be set to 1.<br />
<em>(2) Search</em><br />
There comes a new data, and we should test whether it is in this set. We use different <script type="math/tex">k</script> hash fucntions to hash this data, and map them to the positions of vector. If the positions’ values are all 1, then we believe that the data is in this set, otherwise, we think it’s not.</p>

<p>The results of search obviously have <a href="">false positive</a>. Maybe the data is not in this set, but the mapping positions in vector are all 1, because of other data’s effection. Therefore, the false positive rate should be analyzed to help to choose better parameters and make false positive rate lower.</p>

<p>Assuming that hash functions are all great hash functions, and they can map the input data to vector with average possibility. The possibility that one of positions in the vector isn’t set to 1 after <script type="math/tex">k</script> hash functions for one input data is,</p>

<script type="math/tex; mode=display">P_1=\left(1-\frac{1}{m}\right)^k.</script>

<p>after we insert $n$ data to the vector, the possibility that this position still isn’t be set is,</p>

<script type="math/tex; mode=display">P_2=\left(1-\frac{1}{m}\right)^{kn}</script>

<p>Therefore, the possibility that the position is set is,</p>

<script type="math/tex; mode=display">P_3=1-P_2=1-\left(1-\frac{1}{m}\right)^{kn}</script>

<p>According to the above equation, we get the false positive rate,</p>

<script type="math/tex; mode=display">P=P_3^k=\left(1-\left(1-\frac{1}{m}\right)^{kn}\right)^k</script>

<h4 id="counting-bloom-filter">2.2 Counting Bloom Filter</h4>

<h3 id="how-to-realize-bloom-filter-algorithm-in-java">3. How to realize Bloom Filter algorithm in Java?</h3>

<h4 id="regular-bloom-filter-1">3.1 Regular Bloom Filter</h4>

<h4 id="counting-bloom-filter-1">3.2 Counting Bloom Filter</h4>

<h3 id="reference">Reference</h3>




<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = 'chengblog';
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>



</section>

<div id="back-top">
  <a href="#top" title="back to top"></a>
</div>
<footer>
    <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
    <p><small>Cheng Huang 2015</small></p>
</footer>

<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = 'chengblog';
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>


<script src="/static/minimal/javascripts/scale.fix.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="/static/js/jekyll-search.js" type="text/javascript"></script> 
<script type="text/javascript">
SimpleJekyllSearch.init({
    searchInput: document.getElementById('search-input'),
    resultsContainer: document.getElementById('results-container'),
    dataSource: '/search.json',
    searchResultTemplate: '<li><a href="{url}" title="{desc}">{title}</a></li>',
    noResultsText: 'No results found',
    limit: 10,
    fuzzy: false,
})
</script>
<script ty[e="text/javascript">
$("#back-top").hide();
$(document).ready(function () {
  $(window).scroll(function () {
    if ($(this).scrollTop() > 100) {
      $('#back-top').fadeIn();
  } else {
      $('#back-top').fadeOut();
  }
});
  $('#back-top a').click(function () {
    $('body,html').animate({
      scrollTop: 0
  }, 800);
    return false;
});
});
</script>
</div>
</body>
</html>



